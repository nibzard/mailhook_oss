{"components":{"responses":{"BadRequestError":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Bad Request"},"ConflictError":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Conflict"},"ForbiddenError":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Forbidden"},"InternalServerError":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Internal Server Error"},"NotFoundError":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Not Found"},"UnauthorizedError":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}},"description":"Unauthorized"}},"schemas":{"APIKey":{"properties":{"created_at":{"description":"Timestamp when the API key was created (RFC3339 format)","format":"date-time","type":"string","examples":["2025-01-10T15:04:05Z"]},"expires_at":{"description":"Expiration timestamp for the API key (RFC3339 format). Null means no expiration.","format":"date-time","type":["string","null"]},"id":{"description":"Unique identifier for the API key","type":"string","examples":["key_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"key_type":{"description":"Type of API key. Tenant keys are scoped to a single tenant while internal keys can impersonate tenants when paired with the X-Mailhook-Tenant header.","enum":["tenant","internal"],"readOnly":true,"type":"string","examples":["tenant"]},"note":{"description":"Optional note describing the purpose of this API key","type":["string","null"],"examples":["Local development"]},"secret":{"description":"The API key secret (only shown when creating a new key). Tenant keys use the \"mhsec_\" prefix while internal keys use the \"mhisec_\" prefix.","type":"string","examples":["mhsec_xxx..."]},"tenant_id":{"description":"Identifier of the tenant that owns this key. Null for internal keys.","type":["string","null"],"examples":["tn_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"truncated_secret":{"description":"First 12 characters of the API key secret for identification","type":"string","examples":["mhsec_f3a9c1b2d4e"]}},"required":["id","created_at","key_type"],"type":"object"},"APIKeyInput":{"properties":{"expires_at":{"description":"Optional expiration timestamp for the API key (RFC3339 format). Null or omitted means no expiration.","format":"date-time","type":["string","null"]},"note":{"description":"Optional note describing the purpose of this API key (can only be set on creation)","type":["string","null"]}},"type":"object"},"Attachment":{"properties":{"charset":{"description":"Character encoding of the attachment (if applicable)","type":"string","examples":["utf-8"]},"content_id":{"description":"Content-ID header for inline attachments (used for embedding in HTML).  Typically not needed as Mailhook automatically generates them and rewrites HTML automatically.","type":"string"},"content_type":{"description":"MIME content type of the attachment (without parameters)","type":"string","examples":["application/pdf"]},"custom_summary":{"description":"User managed summary for the attachment (empty string by default).","type":"string","examples":["Converted invoice PDF"]},"filename":{"description":"Original filename of the attachment","type":"string","examples":["invoice.pdf"]},"id":{"description":"Unique identifier for the attachment","type":"string","examples":["att_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"size":{"description":"Size of the attachment in bytes","type":"integer","examples":[58213]},"url":{"description":"Signed URL for downloading the attachment directly","type":"string","examples":["https://downloads.mailhook.example/att_01..."]}},"required":["id","filename","content_type","size","custom_summary"],"type":"object"},"AttachmentUpdateRequest":{"additionalProperties":false,"description":"Update operations for an attachment.","properties":{"charset":{"description":"Update the attachment character set. Provide an empty string to clear it, null or omission leaves it unchanged.","type":["string","null"]},"content_type":{"description":"Update the MIME content type. When null or omitted, the content type remains unchanged.","type":["string","null"]},"custom_summary":{"description":"Update the attachment's custom summary. When null or omitted, the summary remains unchanged.","type":["string","null"]},"filename":{"description":"Update the attachment filename. When null or omitted, the filename remains unchanged.","type":["string","null"]}},"type":"object"},"DNSRecord":{"properties":{"description":{"description":"Human-readable description of what this record does","type":"string","examples":["Verifies domain ownership for SES and enables signing"]},"name":{"description":"DNS record name (hostname)","type":"string","examples":["_amazonses.acme.dev"]},"priority":{"description":"Priority (for MX records)","type":"integer","examples":[10]},"purpose":{"description":"Purpose of this DNS record","enum":["domain_verification","dkim","spf","mx","dmarc"],"type":"string","examples":["dkim"]},"required":{"description":"Whether this record is required for email functionality","type":"boolean","examples":[true]},"ttl":{"description":"Time to live in seconds","type":"integer","examples":[300]},"type":{"description":"DNS record type","enum":["TXT","MX","CNAME","A","AAAA"],"type":"string"},"value":{"description":"DNS record value","type":"string","examples":["v=spf1 include:amazonses.com ~all"]}},"required":["type","name","value","purpose","required"],"type":"object"},"Domain":{"properties":{"active":{"description":"Whether the domain is active","type":"boolean","examples":[true]},"created_at":{"description":"Timestamp when the domain was created (RFC3339 format)","format":"date-time","type":"string","examples":["2025-01-01T10:00:00Z"]},"dns_records":{"description":"DNS records required for domain verification and email routing","items":{"$ref":"#/components/schemas/DNSRecord"},"type":"array"},"domain":{"description":"The domain name","type":"string"},"id":{"description":"Unique identifier for the domain","type":"string","examples":["dom_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"tenant_id":{"description":"ID of the tenant that owns this domain","type":"string","examples":["tn_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"unicode_domain":{"description":"The domain name in Unicode format for display","type":"string","examples":["acme.dev"]},"updated_at":{"description":"Timestamp when the domain was last updated (RFC3339 format)","format":"date-time","type":"string","examples":["2025-01-05T12:00:00Z"]},"verification_method":{"description":"Method used for domain verification","enum":["dns","email","api"],"type":"string","examples":["dns"]},"verification_status":{"description":"Domain verification status","enum":["pending","processing","verified","failed"],"type":"string","examples":["verified"]},"verified_at":{"description":"Timestamp when the domain was verified (RFC3339 format)","format":"date-time","type":"string","examples":["2025-01-05T12:00:00Z"]}},"required":["id","tenant_id","domain","unicode_domain","active","created_at","updated_at"],"type":"object"},"DomainInput":{"properties":{"active":{"description":"Whether the domain is active (defaults to true for new domains, preserves current value for updates if not specified)","type":"boolean"},"domain":{"description":"The domain name","type":"string"}},"required":["domain"],"type":"object"},"Email":{"properties":{"attachments":{"description":"List of file attachments included with the email","items":{"$ref":"#/components/schemas/Attachment"},"type":"array"},"bcc":{"description":"List of BCC recipient email addresses (typically only present for sent emails)","items":{"$ref":"#/components/schemas/EmailAddress"},"type":"array"},"cc":{"description":"List of CC recipient email addresses","items":{"$ref":"#/components/schemas/EmailAddress"},"type":"array"},"custom_summary":{"description":"User managed summary text for the email (empty string by default).","type":"string","examples":["Support ticket #123 summary"]},"from":{"$ref":"#/components/schemas/EmailAddress"},"headers":{"description":"Raw email headers as an array of [key, value] tuples (preserves order and duplicates)","items":{"items":{"type":"string"},"maxItems":2,"minItems":2,"type":"array"},"type":"array","examples":[[["From","Acme Support <support@acme.dev>"],["To","Jane Example <jane@example.com>"],["Subject","Welcome to Acme"]]]},"html":{"description":"HTML body content of the email (sanitized and UTF-8 encoded)","type":"string","examples":["<p>Hi Jane, thanks for signing up!</p>"]},"id":{"description":"Unique identifier for the email","type":"string","examples":["eml_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"labels":{"description":"List of labels applied to this email. System labels include `$junk`, `$untrusted`, `$rejected`, and `$auth-fail`.","items":{"type":"string"},"type":"array"},"mailbox_id":{"description":"ID of the mailbox this email belongs to","type":"string","examples":["mb_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"message_id":{"description":"Email Message-ID header value","type":"string","examples":["20250110.12345@mail.acme.dev"]},"original_html":{"description":"Original MIME HTML part (only included when include_original_bodies=true)","type":"string"},"original_text":{"description":"Original MIME text part (only included when include_original_bodies=true)","type":"string"},"received_at":{"description":"Timestamp when the email was received (RFC3339 format)","format":"date-time","type":"string","examples":["2025-01-10T15:04:05Z"]},"subject":{"description":"Email subject line","type":"string","examples":["Welcome to Acme"]},"text":{"description":"High-quality plain text body (converted from HTML for better quality)","type":"string","examples":["Hi Jane, thanks for signing up!"]},"thread_id":{"description":"ID of the thread this email belongs to","type":"string","examples":["thr_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"to":{"description":"List of recipient email addresses","items":{"$ref":"#/components/schemas/EmailAddress"},"type":"array","examples":[[{"addr":"jane@example.com","name":"Jane Example"}]]},"user_data":{"$ref":"#/components/schemas/UserData"},"verdicts":{"$ref":"#/components/schemas/EmailVerdicts"}},"required":["id","mailbox_id","from","custom_summary","received_at"],"type":"object"},"EmailAddress":{"additionalProperties":false,"description":"Structured email address with optional display name","properties":{"addr":{"description":"The email address (e.g., user@example.com)","type":"string","examples":["jane@example.com"]},"name":{"description":"Optional display name (e.g., John Doe)","type":["string","null"],"examples":["Jane Example"]}},"required":["addr"],"type":"object"},"EmailUpdateRequest":{"additionalProperties":false,"description":"Update operations for an email.","properties":{"add_labels":{"description":"Add these labels to the email (duplicates are ignored).","items":{"type":"string"},"type":"array"},"custom_summary":{"description":"Update the email's custom summary. When null or omitted, the summary remains unchanged.","type":["string","null"]},"remove_labels":{"description":"Remove these labels from the email (missing labels are ignored).","items":{"type":"string"},"type":"array"},"set_labels":{"description":"Replace the entire set of labels applied to this email.","items":{"type":"string"},"type":"array"},"user_data":{"$ref":"#/components/schemas/UserData"}},"type":"object"},"EmailVerdictStatus":{"description":"Normalized verdict status reported by the mail provider.","enum":["ok","fail","unknown","failure"],"type":"string"},"EmailVerdicts":{"additionalProperties":false,"description":"Normalized provider verdicts for security checks.","properties":{"dkim":{"$ref":"#/components/schemas/EmailVerdictStatus"},"dmarc":{"$ref":"#/components/schemas/EmailVerdictStatus"},"junk":{"$ref":"#/components/schemas/EmailVerdictStatus"},"spf":{"$ref":"#/components/schemas/EmailVerdictStatus"},"tls":{"$ref":"#/components/schemas/EmailVerdictStatus"},"virus":{"$ref":"#/components/schemas/EmailVerdictStatus"}},"required":["junk","virus","spf","dkim","dmarc","tls"],"type":"object","examples":[{"dkim":"fail","dmarc":"failure","junk":"fail","spf":"ok","tls":"unknown","virus":"ok"}]},"ErrorResponse":{"properties":{"error":{"properties":{"code":{"description":"Error code","type":"integer","examples":[401]},"correlation_id":{"description":"Unique error correlation ID","type":"string","examples":["req_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"detail":{"description":"Human-readable error detail","type":"string","examples":["Invalid or missing API key"]}},"required":["code","detail","correlation_id"],"type":"object"}},"required":["error"],"type":"object"},"Mailbox":{"properties":{"active":{"description":"Whether the mailbox is active","type":"boolean","examples":[true]},"created_at":{"description":"Timestamp when the mailbox was created (RFC3339 format)","format":"date-time","type":"string","examples":["2025-01-01T10:00:00Z"]},"domain_id":{"description":"ID of the domain this mailbox belongs to","type":"string","examples":["dom_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"filters":{"$ref":"#/components/schemas/MailboxFilters"},"id":{"description":"Unique identifier for the mailbox","type":"string","examples":["mb_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"inbound_policy":{"description":"Inbound participant trust policy. `thread_trust` permits trusted participants on existing threads while labeling brand-new senders as `$rejected`; `permitted_only` restricts delivery to allow-listed senders and labels others as `$untrusted` (deny-listed senders are labeled `$rejected`).","enum":["thread_trust","permitted_only"],"type":"string","examples":["thread_trust"]},"local_part":{"description":"The local part of the email address (part before @)","type":"string"},"sender_name":{"description":"Display name used when sending emails from this mailbox","type":"string","examples":["Support Team"]},"spam_policy":{"description":"Default spam handling policy for inbound messages. `mark` applies the `$junk` label when spam is detected, `delete` drops spam at receipt time.","enum":["mark","delete"],"type":"string","examples":["mark"]},"tenant_id":{"description":"ID of the tenant that owns this mailbox","type":"string","examples":["tn_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"updated_at":{"description":"Timestamp when the mailbox was last updated (RFC3339 format)","format":"date-time","type":"string","examples":["2025-01-01T10:00:00Z"]}},"required":["id","tenant_id","domain_id","local_part","active","sender_name","spam_policy","inbound_policy","created_at","updated_at"],"type":"object"},"MailboxFilters":{"description":"Email filter lists for a mailbox","properties":{"allow":{"description":"List of email addresses allowed to send to this mailbox (whitelist). If not empty, only these addresses can send emails.","items":{"type":"string"},"type":"array"},"deny":{"description":"List of email addresses denied from sending to this mailbox (blacklist). These addresses cannot send emails.","items":{"type":"string"},"type":"array"}},"required":["allow","deny"],"type":"object"},"MailboxInput":{"properties":{"active":{"description":"Whether the mailbox is active (defaults to true for new mailboxes, preserves current value for updates if not specified)","type":"boolean"},"add_allow":{"description":"Add these email addresses to the existing allow list","items":{"type":"string"},"type":"array"},"add_deny":{"description":"Add these email addresses to the existing deny list","items":{"type":"string"},"type":"array"},"inbound_policy":{"description":"Inbound participant trust policy. `thread_trust` permits trusted participants on existing threads while labeling brand-new senders as `$rejected`; `permitted_only` restricts delivery to allow-listed senders and labels others as `$untrusted`. When omitted, the existing policy is preserved (defaults to `thread_trust` for new mailboxes).","enum":["thread_trust","permitted_only"],"type":"string"},"local_part":{"description":"The local part of the email address (part before @)","type":"string"},"remove_allow":{"description":"Remove these email addresses from the existing allow list","items":{"type":"string"},"type":"array"},"remove_deny":{"description":"Remove these email addresses from the existing deny list","items":{"type":"string"},"type":"array"},"sender_name":{"description":"Display name used when sending emails from this mailbox (empty string for new mailboxes, preserves current value for updates if not specified)","type":"string"},"set_allow":{"description":"Replace the entire allow list with these email addresses","items":{"type":"string"},"type":"array"},"set_deny":{"description":"Replace the entire deny list with these email addresses","items":{"type":"string"},"type":"array"},"spam_policy":{"description":"Default spam handling policy for the mailbox. `mark` applies the `$junk` label when spam is detected. `delete` drops spam during receipt. When omitted, the existing policy is preserved (defaults to `mark` for new mailboxes).","enum":["mark","delete"],"type":"string"}},"required":["local_part"],"type":"object"},"NewThreadRequest":{"properties":{"add_auto_reply_headers":{"default":false,"description":"When true, adds auto-reply headers (Auto-Submitted, Precedence, X-Autorespond) to mark the email as automated","type":"boolean"},"attachments":{"description":"File attachments for the email","items":{"$ref":"#/components/schemas/ThreadReplyAttachment"},"type":"array"},"bcc":{"description":"BCC recipients (optional)","items":{"type":"string"},"type":"array"},"cc":{"description":"CC recipients (optional)","items":{"type":"string"},"type":"array"},"css":{"description":"Optional CSS styles to inject into the HTML email (e.g., \"p { color: blue; }\")","type":"string"},"headers":{"description":"Optional additional headers as an array of [key, value] tuples (preserves order and duplicates)","items":{"items":{"type":"string"},"maxItems":2,"minItems":2,"type":"array"},"type":"array"},"html":{"description":"HTML body of the email","type":"string"},"markdown":{"description":"Markdown body of the email (will be converted to HTML using CommonMark) and wrapped in a `<div class=\"response\">` container for styling.","type":"string"},"process_html":{"default":true,"description":"When true (default), processes HTML to inline CSS styles for better email client compatibility","type":"boolean"},"reply_to":{"description":"Reply-To header email address","type":"string"},"sender_name":{"description":"Override the sender display name for this email (uses mailbox default if not specified)","type":"string"},"subject":{"description":"Subject line (required)","type":"string"},"text":{"description":"Plain text body of the email","type":"string"},"to":{"description":"To recipients (required)","items":{"type":"string"},"minItems":1,"type":"array"}},"required":["to","subject"],"type":"object"},"PaginatedAPIKeysResponse":{"allOf":[{"$ref":"#/components/schemas/PaginatedMixin"},{"properties":{"items":{"items":{"$ref":"#/components/schemas/APIKey"},"type":"array"}},"required":["items"],"type":"object"}]},"PaginatedDomainsResponse":{"allOf":[{"$ref":"#/components/schemas/PaginatedMixin"},{"properties":{"items":{"items":{"$ref":"#/components/schemas/Domain"},"type":"array"}},"required":["items"],"type":"object","examples":[{"items":[{"active":true,"created_at":"2025-01-01T10:00:00Z","dns_records":[{"name":"_amazonses.acme.dev","purpose":"domain_verification","required":true,"ttl":300,"type":"TXT","value":"abcdef"}],"domain":"acme.dev","id":"dom_01HQ5KXJ8Z8N9M2K5D6P7R3S4T","tenant_id":"tn_01HQ5KXJ8Z8N9M2K5D6P7R3S4T","unicode_domain":"acme.dev","updated_at":"2025-01-05T12:00:00Z","verification_method":"dns","verification_status":"verified","verified_at":"2025-01-05T12:00:00Z"}],"next":null,"prev":null}]}]},"PaginatedEmailsResponse":{"allOf":[{"$ref":"#/components/schemas/PaginatedMixin"},{"properties":{"items":{"items":{"$ref":"#/components/schemas/Email"},"type":"array"}},"required":["items"],"type":"object","examples":[{"items":[{"from":{"addr":"support@acme.dev","name":"Acme Support"},"id":"eml_01HQ5KXJ8Z8N9M2K5D6P7R3S4T","mailbox_id":"mb_01HQ5KXJ8Z8N9M2K5D6P7R3S4T","message_id":"20250110.12345@mail.acme.dev","received_at":"2025-01-10T15:04:05Z","subject":"Welcome to Acme","text":"Hi Jane, thanks for signing up!","thread_id":"thr_01HQ5KXJ8Z8N9M2K5D6P7R3S4T","to":[{"addr":"jane@example.com","name":"Jane Example"}]}],"next":null,"prev":null}]}]},"PaginatedMailboxesResponse":{"allOf":[{"$ref":"#/components/schemas/PaginatedMixin"},{"properties":{"items":{"items":{"$ref":"#/components/schemas/Mailbox"},"type":"array"}},"required":["items"],"type":"object","examples":[{"items":[{"active":true,"created_at":"2025-01-01T10:00:00Z","domain_id":"dom_01HQ5KXJ8Z8N9M2K5D6P7R3S4T","id":"mb_01HQ5KXJ8Z8N9M2K5D6P7R3S4T","local_part":"support","tenant_id":"tn_01HQ5KXJ8Z8N9M2K5D6P7R3S4T","updated_at":"2025-01-01T10:00:00Z"}],"next":null,"prev":null}]}]},"PaginatedMixin":{"properties":{"next":{"description":"Cursor for next page","type":["string","null"],"examples":["g2wAAAABaAJkAA1uZXh0LmN1cnNvcmECbQ=="]},"prev":{"description":"Cursor for previous page","type":["string","null"]}},"type":"object"},"PaginatedTenantsResponse":{"allOf":[{"$ref":"#/components/schemas/PaginatedMixin"},{"properties":{"items":{"items":{"$ref":"#/components/schemas/Tenant"},"type":"array"}},"required":["items"],"type":"object"}]},"PaginatedThreadsResponse":{"allOf":[{"$ref":"#/components/schemas/PaginatedMixin"},{"properties":{"items":{"items":{"$ref":"#/components/schemas/Thread"},"type":"array"}},"required":["items"],"type":"object"}]},"PaginatedWebhookDeliveryAttemptsResponse":{"allOf":[{"$ref":"#/components/schemas/PaginatedMixin"},{"properties":{"items":{"items":{"$ref":"#/components/schemas/WebhookDeliveryAttempt"},"type":"array"}},"required":["items"],"type":"object"}]},"PaginatedWebhookScheduledDeliveriesResponse":{"allOf":[{"$ref":"#/components/schemas/PaginatedMixin"},{"properties":{"items":{"items":{"$ref":"#/components/schemas/WebhookScheduledDelivery"},"type":"array"}},"required":["items"],"type":"object"}]},"PaginatedWebhooksResponse":{"allOf":[{"$ref":"#/components/schemas/PaginatedMixin"},{"properties":{"items":{"items":{"$ref":"#/components/schemas/Webhook"},"type":"array"}},"required":["items"],"type":"object"}]},"Tenant":{"properties":{"created_at":{"description":"Timestamp when the tenant was created","format":"date-time","type":"string"},"id":{"description":"Unique identifier for the tenant","type":"string","examples":["tnt_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"name":{"description":"Human-readable tenant name","type":"string","examples":["Acme Inc"]},"updated_at":{"description":"Timestamp when the tenant was last updated","format":"date-time","type":"string"}},"required":["id","name","created_at","updated_at"],"type":"object"},"TenantCreateRequest":{"properties":{"name":{"description":"Human-readable tenant name","type":"string","examples":["Acme Inc"]}},"required":["name"],"type":"object"},"TenantUpdateRequest":{"additionalProperties":false,"properties":{"name":{"description":"Updated tenant name","type":"string","examples":["Acme Corporation"]}},"type":"object"},"Thread":{"properties":{"custom_summary":{"description":"User managed summary text for the thread (empty string by default).","type":"string","examples":["Onboarding discussion with ACME"]},"first_message_at":{"description":"Timestamp of the first message in the thread","format":"date-time","type":"string","examples":["2025-01-09T10:00:00Z"]},"has_attachments":{"description":"Whether any message in the thread has attachments","type":"boolean","examples":[true]},"has_hidden_messages":{"description":"Whether the thread contains messages with hidden labels (junk/rejected/etc.)","type":"boolean","examples":[true]},"id":{"description":"Unique identifier for the thread (thr_XXXXX format)","type":"string","examples":["thr_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"labels":{"description":"List of labels aggregated for this thread. System labels (`$junk`, `$untrusted`, `$rejected`, `$auth-fail`) cannot be managed via thread label APIs.","items":{"type":"string"},"type":"array"},"last_message_at":{"description":"Timestamp of the most recent message in the thread","format":"date-time","type":"string","examples":["2025-01-10T15:04:05Z"]},"mailbox_id":{"description":"ID of the mailbox (alias) this thread belongs to","type":"string","examples":["mb_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"message_count":{"description":"Number of messages in this thread","type":"integer","examples":[5]},"participants":{"description":"List of email addresses that have participated in this thread","items":{"$ref":"#/components/schemas/EmailAddress"},"type":"array","examples":[[{"addr":"alice@example.com","name":"Alice"},{"addr":"bob@example.com","name":"Bob"}]]},"preview":{"description":"Preview text from the most recent message","type":"string","examples":["Thanks for the update. I'll review the changes and..."]},"subject":{"description":"Normalized subject of the thread (without Re:, Fwd:, etc.)","type":"string","examples":["Project Update"]},"user_data":{"$ref":"#/components/schemas/UserData"}},"required":["id","mailbox_id","subject","message_count","first_message_at","last_message_at","custom_summary"],"type":"object"},"ThreadReplyAttachment":{"properties":{"content_id":{"description":"Content-ID header for inline attachments (used for embedding in HTML).","type":"string"},"content_type":{"description":"MIME type of the attachment (defaults to response Content-Type or filename extension when omitted)","type":"string"},"data":{"description":"Base64 encoded attachment data. Required unless url is provided.","type":"string","contentEncoding":"base64"},"filename":{"description":"Name of the file attachment","type":"string"},"inline":{"description":"Whether this attachment should use inline disposition (for embedded images)","type":"boolean"},"url":{"description":"Remote URL to fetch attachment data from when data is not provided","format":"uri","type":"string"}},"required":["filename"],"type":"object"},"ThreadReplyRequest":{"properties":{"add_auto_reply_headers":{"default":false,"description":"When true, adds auto-reply headers (Auto-Submitted, Precedence, X-Autorespond) to mark the email as automated","type":"boolean"},"attachments":{"description":"File attachments for the email","items":{"$ref":"#/components/schemas/ThreadReplyAttachment"},"type":"array"},"bcc":{"description":"BCC recipients (always additive)","items":{"type":"string"},"type":"array"},"cc":{"description":"CC recipients (overrides reply_policy defaults)","items":{"type":"string"},"type":"array"},"css":{"description":"Optional CSS styles to inject into the HTML email (e.g., \"p { color: blue; }\")","type":"string"},"email_id":{"description":"Optional ID of specific email in thread to reply to (defaults to most recent)","type":"string"},"headers":{"description":"Optional additional headers as an array of [key, value] tuples (preserves order and duplicates)","items":{"items":{"type":"string"},"maxItems":2,"minItems":2,"type":"array"},"type":"array"},"html":{"description":"HTML body of the email","type":"string"},"markdown":{"description":"Markdown body of the email (will be converted to HTML using CommonMark)","type":"string"},"process_html":{"default":true,"description":"When true (default), processes HTML to inline CSS styles for better email client compatibility","type":"boolean"},"quote_reply":{"default":true,"description":"When true (default), quotes the email being replied to at the bottom of the reply","type":"boolean"},"reply_policy":{"default":"all","description":"Policy for determining default recipients (all=everyone, all_to=only To recipients, all_thread=all thread participants, author=only email author)","enum":["all","all_to","all_thread","author"],"type":"string"},"reply_to":{"description":"Reply-To header email address","type":"string"},"sender_name":{"description":"Override the sender display name for this email (uses mailbox default if not specified)","type":"string"},"subject":{"description":"Optional subject line (defaults to \"Re: {original_subject}\" if not provided)","type":"string"},"text":{"description":"Plain text body of the email","type":"string"},"to":{"description":"To recipients (overrides reply_policy defaults)","items":{"type":"string"},"type":"array"}},"type":"object"},"ThreadUpdateRequest":{"additionalProperties":false,"description":"Update operations for a thread.","properties":{"add_labels":{"description":"Add these labels to the thread (duplicates are ignored).","items":{"type":"string"},"type":"array"},"custom_summary":{"description":"Update the thread's custom summary. When null or omitted, the summary remains unchanged.","type":["string","null"]},"remove_labels":{"description":"Remove these labels from the thread (missing labels are ignored).","items":{"type":"string"},"type":"array"},"set_labels":{"description":"Replace the entire set of labels applied to this thread.","items":{"type":"string"},"type":"array"},"user_data":{"$ref":"#/components/schemas/UserData"}},"type":"object"},"ThreadWithMessages":{"allOf":[{"$ref":"#/components/schemas/Thread"},{"properties":{"messages":{"description":"All messages in this thread, ordered by date","items":{"$ref":"#/components/schemas/Email"},"type":"array"}},"required":["messages"],"type":"object"}]},"UserData":{"additionalProperties":true,"description":"Arbitrary user-defined metadata stored as key-value pairs.","type":"object","examples":[{"priority":"high","ticket_id":"12345"}]},"Webhook":{"properties":{"active":{"description":"Whether the webhook is active and will receive deliveries","type":"boolean","examples":[true]},"created_at":{"description":"Timestamp when the webhook was created (RFC3339 format)","format":"date-time","type":"string","examples":["2025-01-10T15:04:05Z"]},"ephemeral":{"description":"Whether the webhook is ephemeral (short-lived and auto-deleted)","type":"boolean","examples":[false]},"filters":{"$ref":"#/components/schemas/WebhookFilters"},"id":{"description":"Unique identifier for the webhook","type":"string","examples":["wh_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"last_activity_at":{"description":"Timestamp of the last webhook delivery attempt (RFC3339 format)","format":"date-time","type":["string","null"],"examples":["2025-01-10T16:00:00Z"]},"secret":{"description":"Secret key used for webhook signature verification","type":"string","examples":["whsec_bXktc2VjcmV0LWNleQ=="]},"tenant_id":{"description":"ID of the tenant that owns this webhook","type":"string","examples":["tn_01HQ5KXJ8Z8N9M2K5D6P7R3S4T"]},"url":{"description":"The webhook URL that will be invoked when emails are received","type":"string","examples":["https://api.acme.dev/hooks/mail"]}},"required":["id","tenant_id","url","secret","active","ephemeral","created_at"],"type":"object"},"WebhookDeliveryAttempt":{"properties":{"attempt_number":{"description":"Attempt sequence number starting at 1","type":"integer"},"created_at":{"description":"When the attempt was recorded","format":"date-time","type":"string"},"delivery_id":{"description":"Scheduled delivery that was attempted","type":"string"},"duration_ms":{"description":"Time taken to execute the attempt in milliseconds","type":["integer","null"]},"error_message":{"description":"Error message captured when the attempt failed before receiving a response","type":["string","null"]},"id":{"description":"Unique identifier of the delivery attempt","type":"string"},"payload":{"additionalProperties":true,"description":"JSON payload that was sent to the webhook endpoint for this attempt","type":["object","null"]},"response_body":{"description":"Body returned by the remote endpoint (truncated when flagged)","type":["string","null"]},"response_status":{"description":"HTTP status code returned by the remote endpoint","type":["integer","null"]},"response_truncated":{"description":"Whether the response body was truncated before storage","type":"boolean"},"status":{"description":"Outcome of the attempt","enum":["pending","failed","processing","delivered","expired","failed_permanent"],"type":"string"},"tenant_id":{"description":"Owning tenant identifier","type":"string"},"webhook_id":{"description":"Webhook that received the attempt","type":"string"}},"required":["id","delivery_id","webhook_id","tenant_id","attempt_number","status","response_truncated","created_at"],"type":"object"},"WebhookFilters":{"description":"Filters for webhook delivery. Empty array means all.","properties":{"domains":{"description":"List of domains to receive events for. Accepts domain ID (dom_...) or domain name on input. Values are resolved to domain IDs at registration and returned as IDs.","items":{"type":"string"},"type":"array"},"event_types":{"description":"Event types to subscribe to. Supported values are \"email.received\" and \"email.received_hidden\".","items":{"enum":["email.received","email.received_hidden"],"type":"string"},"type":"array"},"mailboxes":{"description":"List of mailboxes to receive events for. Accepts mailbox ID (als_...) or address local@domain on input. Values are resolved to mailbox IDs at registration and returned as IDs.","items":{"type":"string"},"type":"array"}},"type":"object"},"WebhookInput":{"description":"Conditional requirements â€” either provide `id` to update, or provide `url` to create or upsert by URL.","properties":{"active":{"description":"Whether the webhook is active. Disabling disables deliveries.","type":"boolean"},"ephemeral":{"description":"Whether the webhook is ephemeral. Ephemeral webhooks are short-lived and automatically deleted after a day.","type":"boolean"},"filters":{"$ref":"#/components/schemas/WebhookFilters"},"id":{"description":"If provided, update the webhook with this ID (must already exist)","type":"string"},"secret":{"description":"Secret in base64 format with optional `whsec_` prefix. Optional for creation (auto-generated if omitted) and optional for updates (left unchanged if omitted).\n","type":"string"},"url":{"description":"The webhook URL that will be invoked. Required when creating a new webhook (when `id` is not provided).","type":"string"}},"type":"object"},"WebhookRedeliverRequest":{"additionalProperties":false,"description":"Payload for re-delivering a webhook to the same or different target.","properties":{"webhook_id":{"description":"Optional webhook ID to deliver to. If omitted, uses the original webhook. WARNING - Delivering to a different webhook bypasses that webhook's filters.","type":"string"}},"type":"object"},"WebhookScheduledDelivery":{"properties":{"attempts":{"description":"Number of attempts that have been recorded for this delivery","type":"integer"},"created_at":{"description":"When the delivery was enqueued","format":"date-time","type":"string"},"email_id":{"description":"Email associated with this delivery","type":"string"},"id":{"description":"Unique identifier of the scheduled webhook delivery","type":"string"},"last_attempt":{"description":"Timestamp of the most recent attempt","format":"date-time","type":["string","null"]},"next_retry":{"description":"Next scheduled retry time","format":"date-time","type":"string"},"payload":{"additionalProperties":true,"description":"JSON payload that will be sent to the webhook endpoint","type":["object","null"]},"status":{"description":"Current delivery status","enum":["pending","failed","processing","delivered","expired","failed_permanent"],"type":"string"},"tenant_id":{"description":"Owning tenant identifier","type":"string"},"webhook_id":{"description":"Webhook that will receive the payload","type":"string"}},"required":["id","webhook_id","tenant_id","email_id","status","attempts","next_retry","created_at"],"type":"object"}},"securitySchemes":{"BearerAuth":{"bearerFormat":"API Key","scheme":"bearer","type":"http"}}},"info":{"contact":{"url":"https://mailhook.sh/"},"description":"Public mailhook API for managing domains, email aliases (mailboxes), receiving emails via webhooks, and accessing mailbox contents.","license":{"name":"Apache 2.0","url":"https://www.apache.org/licenses/LICENSE-2.0"},"title":"Mailhook API","version":"1.0"},"openapi":"3.1.1","paths":{"/api-keys":{"get":{"description":"Get API keys visible to the caller. Tenant keys receive only their own tenant's keys,\nwhile internal keys can either impersonate a tenant via `X-Mailhook-Tenant` or, when no\ntenant is specified, enumerate API keys across all tenants.\n","operationId":"ApiKeysList","parameters":[{"description":"Maximum number of API keys to return (default: 50, maximum: 100)","in":"query","name":"limit","schema":{"default":50,"maximum":100,"minimum":1,"type":"integer"}},{"description":"Opaque cursor for pagination (treat as a token)","in":"query","name":"cursor","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"examples":{"sample":{"value":{"items":[{"created_at":"2025-01-10T15:04:05Z","expires_at":null,"id":"key_01HQ5KXJ8Z8N9M2K5D6P7R3S4T","key_type":"tenant","note":"production","tenant_id":"tn_01HQ5KXJ8Z8N9M2K5D6P7R3S4T","truncated_secret":"mhsec_abcd1234efgh..."}],"next":null,"prev":null}}},"schema":{"$ref":"#/components/schemas/PaginatedAPIKeysResponse"}}},"description":"OK"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"List API keys","tags":["api-keys"],"x-access-scope":"tenant_or_internal","x-badges":[{"name":"Internal"},{"name":"Tenant"}]},"post":{"description":"Create a new API key for the authenticated tenant. The secret will be generated automatically and only shown once in the response.","operationId":"ApiKeysCreate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIKeyInput"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIKey"}}},"description":"Created new API key"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Create an API key","tags":["api-keys"],"x-access-scope":"tenant_or_internal","x-badges":[{"name":"Internal"},{"name":"Tenant"},{"name":"Idempotency-Key"}],"x-idempotency":true}},"/api-keys/{api_key_id}":{"delete":{"description":"Delete an API key by its ID or secret. You can provide either the API key ID (e.g., \"key_abc123\") or the full API key secret (e.g., \"mhsec_...\" for tenant keys or \"mhisec_...\" for internal keys).","operationId":"ApiKeysDelete","parameters":[{"description":"API key ID (e.g., \"key_abc123\") or full API key secret (e.g., \"mhsec_...\" / \"mhisec_...\")","in":"path","name":"api_key_id","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"API key deleted successfully"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Delete an API key","tags":["api-keys"],"x-access-scope":"tenant_or_internal","x-badges":[{"name":"Internal"},{"name":"Tenant"}]}},"/attachments/{mailbox_id}/{attachment_id}/download":{"get":{"description":"Download an attachment using a pre-signed URL (no authentication required).  Note that this endpoint is an implementation detail and not part of the public API.  Certain pre-signed URLs might not even point here, but directly to blob storage URLs such as S3.","operationId":"AttachmentsDownloadSigned","parameters":[{"description":"Mailbox ID that owns the attachment","in":"path","name":"mailbox_id","required":true,"schema":{"type":"string"}},{"description":"Unique identifier of the attachment to download","in":"path","name":"attachment_id","required":true,"schema":{"type":"string"}},{"description":"Expiry timestamp","in":"query","name":"expires","required":true,"schema":{"type":"string"}},{"description":"HMAC signature","in":"query","name":"signature","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/octet-stream":{}},"description":"Attachment file download"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"summary":"Download attachment (signed)","tags":["public"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}],"x-internal":true}},"/domains":{"get":{"description":"Get all domains (active and inactive) for the authenticated tenant","operationId":"DomainsList","parameters":[{"description":"Maximum number of domains to return (default: 50, maximum: 100)","in":"query","name":"limit","schema":{"default":50,"maximum":100,"minimum":1,"type":"integer"}},{"description":"Opaque cursor for pagination (treat as a token)","in":"query","name":"cursor","schema":{"type":"string"}},{"description":"Basic case-insensitive keyword search on the domain name. Does not support the advanced search syntax used for email queries.","in":"query","name":"q","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedDomainsResponse"}}},"description":"OK"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"List domains","tags":["domains"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]},"post":{"description":"Create a new domain or update an existing one. If the domain already exists for this tenant, it will be updated.","operationId":"DomainsCreate","parameters":[{"description":"Force re-initialization of AWS SES domain verification even if already initiated","in":"query","name":"force_verification","schema":{"default":false,"type":"boolean"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DomainInput"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Domain"}}},"description":"Updated existing domain"},"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Domain"}}},"description":"Created new domain"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Create or update a domain","tags":["domains"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"},{"name":"Idempotency-Key"}],"x-idempotency":true}},"/domains/{domain_or_id}":{"delete":{"description":"Soft delete a domain and all associated mailboxes","operationId":"DomainsDelete","parameters":[{"description":"Domain name (e.g., example.com) or domain ID to delete","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"status":{"type":"string","examples":["deleted"]}},"required":["status"],"type":"object"}}},"description":"OK"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Delete a domain","tags":["domains"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]},"get":{"description":"Get details of a specific domain by ID or domain name","operationId":"DomainsGet","parameters":[{"description":"Domain name (e.g., example.com) or domain ID to retrieve","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Domain"}}},"description":"OK"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Get domain","tags":["domains"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]}},"/domains/{domain_or_id}/emails":{"get":{"description":"Get all emails across all mailboxes in a specific domain","operationId":"EmailsListByDomain","parameters":[{"description":"Domain name (e.g., example.com) or domain ID to retrieve emails from","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Maximum number of emails to return (default: 50, maximum: 100)","in":"query","name":"limit","schema":{"default":50,"maximum":100,"minimum":1,"type":"integer"}},{"description":"Opaque cursor for pagination (treat as a token)","in":"query","name":"cursor","schema":{"type":"string"}},{"description":"Filter results using Mailhook's query language (e.g., `from:alice@example.com has:attachment`).","in":"query","name":"q","schema":{"type":"string"}},{"description":"Filter results to items that carry all specified labels. Equivalent to appending `label:value` terms to `q`.","explode":true,"in":"query","name":"labels","schema":{"items":{"type":"string"},"type":"array"},"style":"form"},{"description":"Include hidden emails (junk, rejected, trash, untrusted). Default is false.","in":"query","name":"include_hidden","schema":{"default":false,"type":"boolean"}},{"description":"Include original text and HTML bodies before conversion","in":"query","name":"include_original_bodies","schema":{"default":false,"type":"boolean"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedEmailsResponse"}}},"description":"OK"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"List all emails for domain","tags":["emails"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]}},"/domains/{domain_or_id}/mb":{"get":{"description":"Get all mailboxes (aliases) for a specific domain","operationId":"MailboxesList","parameters":[{"description":"Domain name (e.g., example.com) or domain ID to get mailboxes for","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Maximum number of mailboxes to return (default: 50, maximum: 100)","in":"query","name":"limit","schema":{"default":50,"maximum":100,"minimum":1,"type":"integer"}},{"description":"Basic case-insensitive keyword search on the mailbox local-part. Does not support the advanced search syntax used for email queries.","in":"query","name":"q","schema":{"type":"string"}},{"description":"Opaque cursor for pagination (treat as a token)","in":"query","name":"cursor","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedMailboxesResponse"}}},"description":"OK"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"List mailboxes for domain","tags":["mailboxes"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]},"post":{"description":"Create a new mailbox (alias) or update an existing one","operationId":"MailboxesCreate","parameters":[{"description":"Domain name (e.g., example.com) or domain ID to create mailbox for","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MailboxInput"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Mailbox"}}},"description":"Updated existing mailbox"},"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Mailbox"}}},"description":"Created new mailbox"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Create or update a mailbox","tags":["mailboxes"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"},{"name":"Idempotency-Key"}],"x-idempotency":true}},"/domains/{domain_or_id}/mb/{mailbox_alias_or_id}":{"delete":{"description":"Soft delete a mailbox and all associated emails","operationId":"MailboxesDelete","parameters":[{"description":"Domain name or ID containing the mailbox","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Mailbox alias (local part, e.g., \"support\") or mailbox ID to delete","in":"path","name":"mailbox_alias_or_id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"status":{"type":"string","examples":["deleted"]}},"required":["status"],"type":"object"}}},"description":"OK"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Delete a mailbox","tags":["mailboxes"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]},"get":{"description":"Retrieve a single mailbox (alias) by ID or local part within a domain","operationId":"MailboxesGet","parameters":[{"description":"Domain name or ID containing the mailbox","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Mailbox alias (local part, e.g., \"support\") or mailbox ID to retrieve","in":"path","name":"mailbox_alias_or_id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Mailbox"}}},"description":"OK"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Get mailbox details","tags":["mailboxes"]}},"/domains/{domain_or_id}/mb/{mailbox_alias_or_id}/attachments/{attachment_id}":{"get":{"description":"Download an attachment by its unique ID","operationId":"AttachmentsDownload","parameters":[{"description":"Domain name or ID containing the mailbox","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Mailbox alias (local part) or ID","in":"path","name":"mailbox_alias_or_id","required":true,"schema":{"type":"string"}},{"description":"Unique identifier of the attachment to download","in":"path","name":"attachment_id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/octet-stream":{}},"description":"Attachment file download"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Download attachment","tags":["attachments"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]},"patch":{"description":"Update attachment metadata such as filename, content type, charset, or custom summary.","operationId":"AttachmentsUpdate","parameters":[{"description":"Domain name or ID containing the mailbox","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Mailbox alias (local part) or ID","in":"path","name":"mailbox_alias_or_id","required":true,"schema":{"type":"string"}},{"description":"Unique identifier of the attachment to update","in":"path","name":"attachment_id","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AttachmentUpdateRequest"}}}},"responses":{"204":{"description":"Attachment updated"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Update attachment","tags":["attachments"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]}},"/domains/{domain_or_id}/mb/{mailbox_alias_or_id}/attachments/{attachment_id}/signed-url":{"get":{"description":"Return the attachment metadata, including a signed download URL valid for 1 hour.","operationId":"AttachmentsGet","parameters":[{"description":"Domain name or ID containing the mailbox","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Mailbox alias (local part) or ID","in":"path","name":"mailbox_alias_or_id","required":true,"schema":{"type":"string"}},{"description":"Unique identifier of the attachment","in":"path","name":"attachment_id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Attachment"}}},"description":"Attachment object"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Get attachment","tags":["attachments"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]}},"/domains/{domain_or_id}/mb/{mailbox_alias_or_id}/emails":{"get":{"description":"Get emails for a specific mailbox","operationId":"EmailsListByMailbox","parameters":[{"description":"Domain name or ID containing the mailbox","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Mailbox alias (local part) or ID to retrieve emails from","in":"path","name":"mailbox_alias_or_id","required":true,"schema":{"type":"string"}},{"description":"Maximum number of emails to return (default: 50, maximum: 100)","in":"query","name":"limit","schema":{"default":50,"maximum":100,"type":"integer"}},{"description":"Pagination cursor for retrieving the next set of results","in":"query","name":"cursor","schema":{"type":"string"}},{"description":"Filter results using Mailhook's query language (e.g., `subject:renewal before:2024-06-01`).","in":"query","name":"q","schema":{"type":"string"}},{"description":"Filter results to items that carry all specified labels. Equivalent to appending `label:value` terms to `q`.","explode":true,"in":"query","name":"labels","schema":{"items":{"type":"string"},"type":"array"},"style":"form"},{"description":"Include hidden emails (junk, rejected, trash, untrusted). Default is false.","in":"query","name":"include_hidden","schema":{"default":false,"type":"boolean"}},{"description":"Include original MIME text and HTML parts in response","in":"query","name":"include_original_bodies","schema":{"default":false,"type":"boolean"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedEmailsResponse"}}},"description":"OK"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"List emails by mailbox","tags":["emails"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]}},"/domains/{domain_or_id}/mb/{mailbox_alias_or_id}/emails/{email_id}":{"delete":{"description":"Delete a specific email from a mailbox","operationId":"EmailsDelete","parameters":[{"description":"Domain name or ID containing the mailbox","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Mailbox alias (local part) or ID","in":"path","name":"mailbox_alias_or_id","required":true,"schema":{"type":"string"}},{"description":"Unique identifier of the email to delete","in":"path","name":"email_id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"status":{"type":"string","examples":["deleted"]}},"required":["status"],"type":"object"}}},"description":"OK"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Delete an email","tags":["emails"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]},"get":{"description":"Get a specific email from a mailbox","operationId":"EmailsGet","parameters":[{"description":"Domain name or ID containing the mailbox","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Mailbox alias (local part) or ID","in":"path","name":"mailbox_alias_or_id","required":true,"schema":{"type":"string"}},{"description":"Unique identifier of the email to retrieve","in":"path","name":"email_id","required":true,"schema":{"type":"string"}},{"description":"Include original MIME text and HTML parts in response","in":"query","name":"include_original_bodies","schema":{"default":false,"type":"boolean"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Email"}}},"description":"OK"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Get email by ID","tags":["emails"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]},"patch":{"description":"Update email metadata, including user data and labels.","operationId":"EmailsUpdate","parameters":[{"description":"Domain name or ID containing the mailbox","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Mailbox alias (local part) or ID","in":"path","name":"mailbox_alias_or_id","required":true,"schema":{"type":"string"}},{"description":"Unique identifier of the email to update","in":"path","name":"email_id","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailUpdateRequest"}}},"required":true},"responses":{"204":{"description":"Email updated"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Update email","tags":["emails"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"},{"name":"Idempotency-Key"}],"x-idempotency":true}},"/domains/{domain_or_id}/mb/{mailbox_alias_or_id}/emails/{email_id}/raw":{"get":{"description":"Download the raw .eml file for a specific email.","operationId":"EmailsDownloadRaw","parameters":[{"description":"Domain name or ID containing the mailbox","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Mailbox alias (local part) or ID","in":"path","name":"mailbox_alias_or_id","required":true,"schema":{"type":"string"}},{"description":"Unique identifier of the email to download","in":"path","name":"email_id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"message/rfc822":{"schema":{"type":"string","contentMediaType":"application/octet-stream"}}},"description":"Raw email file download","headers":{"Content-Disposition":{"description":"Attachment header with filename","schema":{"type":"string","examples":["attachment; filename=\"eml_01HQ5KXJ8Z8N9M2K5D6P7R3S4T.eml\""]}}}},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Download raw email","tags":["emails"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]}},"/domains/{domain_or_id}/mb/{mailbox_alias_or_id}/threads":{"get":{"description":"Get email threads for a specific mailbox.","operationId":"ThreadsListByMailbox","parameters":[{"description":"Domain name or ID containing the mailbox","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Mailbox alias (local part, e.g., \"support\") or mailbox ID to retrieve threads from","in":"path","name":"mailbox_alias_or_id","required":true,"schema":{"type":"string"}},{"description":"Maximum number of threads to return (default: 50, maximum: 100)","in":"query","name":"limit","schema":{"default":50,"maximum":100,"minimum":1,"type":"integer"}},{"description":"Opaque cursor for pagination (treat as a token)","in":"query","name":"cursor","schema":{"type":"string"}},{"description":"Filter results using Mailhook's query language (e.g., `from:alice@example.com has:attachment`).","in":"query","name":"q","schema":{"type":"string"}},{"description":"Filter results to items that carry all specified labels. Equivalent to appending `label:value` terms to `q`.","explode":true,"in":"query","name":"labels","schema":{"items":{"type":"string"},"type":"array"},"style":"form"},{"description":"Include hidden threads (junk, rejected, trash, untrusted). Default is false.","in":"query","name":"include_hidden","schema":{"default":false,"type":"boolean"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedThreadsResponse"}}},"description":"OK"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"List threads by mailbox","tags":["threads"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]},"post":{"description":"Start a new email thread by sending an outbound email from the mailbox's email address","operationId":"ThreadsNew","parameters":[{"description":"Domain name or ID containing the mailbox","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Mailbox alias (local part) or ID","in":"path","name":"mailbox_alias_or_id","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewThreadRequest"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Email"}}},"description":"Thread created and email sent successfully"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Create new thread","tags":["threads"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"},{"name":"Idempotency-Key"}],"x-idempotency":true}},"/domains/{domain_or_id}/mb/{mailbox_alias_or_id}/threads/rebuild":{"post":{"description":"Rebuild all threads for a mailbox.","operationId":"ThreadsRebuildByMailbox","parameters":[{"description":"Domain name or ID containing the mailbox","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Mailbox alias (local part) or ID","in":"path","name":"mailbox_alias_or_id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"status":{"type":"string","examples":["rebuilt"]},"thread_count":{"description":"Number of threads created","type":"integer"}},"required":["status","thread_count"],"type":"object"}}},"description":"Threads rebuilt successfully"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Rebuild threads","tags":["threads"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]}},"/domains/{domain_or_id}/mb/{mailbox_alias_or_id}/threads/{thread_id}":{"get":{"description":"Get a specific email thread with all its messages","operationId":"ThreadsGet","parameters":[{"description":"Domain name or ID containing the mailbox","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Mailbox alias (local part) or ID","in":"path","name":"mailbox_alias_or_id","required":true,"schema":{"type":"string"}},{"description":"Unique identifier of the thread","in":"path","name":"thread_id","required":true,"schema":{"type":"string"}},{"description":"Include hidden messages within the thread (junk, rejected, trash, untrusted). Default is false.","in":"query","name":"include_hidden","schema":{"default":false,"type":"boolean"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ThreadWithMessages"}}},"description":"OK"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Get thread by ID","tags":["threads"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]},"patch":{"description":"Update thread metadata, including user data and labels.","operationId":"ThreadsUpdate","parameters":[{"description":"Domain name or ID containing the mailbox","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Mailbox alias (local part) or ID","in":"path","name":"mailbox_alias_or_id","required":true,"schema":{"type":"string"}},{"description":"Unique identifier of the thread to update","in":"path","name":"thread_id","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ThreadUpdateRequest"}}},"required":true},"responses":{"204":{"description":"Thread updated"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Update thread","tags":["threads"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"},{"name":"Idempotency-Key"}],"x-idempotency":true}},"/domains/{domain_or_id}/mb/{mailbox_alias_or_id}/threads/{thread_id}/reply":{"post":{"description":"Reply to an email thread from the mailbox's email address","operationId":"ThreadsReply","parameters":[{"description":"Domain name or ID containing the mailbox","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Mailbox alias (local part) or ID","in":"path","name":"mailbox_alias_or_id","required":true,"schema":{"type":"string"}},{"description":"Thread ID to reply to","in":"path","name":"thread_id","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ThreadReplyRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Email"}}},"description":"Reply sent successfully"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Reply to a thread","tags":["threads"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"},{"name":"Idempotency-Key"}],"x-idempotency":true}},"/domains/{domain_or_id}/threads":{"get":{"description":"Get all email threads across all mailboxes in a specific domain.","operationId":"ThreadsListByDomain","parameters":[{"description":"Domain name (e.g., example.com) or domain ID to retrieve threads from","in":"path","name":"domain_or_id","required":true,"schema":{"type":"string"}},{"description":"Maximum number of threads to return (default: 50, maximum: 100)","in":"query","name":"limit","schema":{"default":50,"maximum":100,"minimum":1,"type":"integer"}},{"description":"Opaque cursor for pagination (treat as a token)","in":"query","name":"cursor","schema":{"type":"string"}},{"description":"Filter results using Mailhook's query language (e.g., `label:important after:2024-01-01`).","in":"query","name":"q","schema":{"type":"string"}},{"description":"Filter results to items that carry all specified labels. Equivalent to appending `label:value` terms to `q`.","explode":true,"in":"query","name":"labels","schema":{"items":{"type":"string"},"type":"array"},"style":"form"},{"description":"Include hidden threads (junk, rejected, trash, untrusted). Default is false.","in":"query","name":"include_hidden","schema":{"default":false,"type":"boolean"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedThreadsResponse"}}},"description":"OK"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"List all threads for domain","tags":["threads"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]}},"/health":{"get":{"description":"Check if the API is running and healthy","operationId":"HealthCheck","responses":{"200":{"content":{"application/json":{"schema":{"properties":{"status":{"description":"Health status of the API service","type":"string","examples":["healthy"]}},"required":["status"],"type":"object"}}},"description":"OK"}},"summary":"Health check endpoint","tags":["health"],"x-access-scope":"internal","x-badges":[{"name":"Internal"}],"x-internal":true}},"/tenants":{"get":{"description":"List tenants with cursor-based pagination. Internal API keys only.","operationId":"TenantsList","parameters":[{"description":"Maximum number of tenants to return (default: 50, maximum: 100)","in":"query","name":"limit","schema":{"default":50,"maximum":100,"minimum":1,"type":"integer"}},{"description":"Opaque cursor for pagination (treat as a token)","in":"query","name":"cursor","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedTenantsResponse"}}},"description":"OK"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"List tenants","tags":["tenants"],"x-access-scope":"internal","x-badges":[{"name":"Internal"}]},"post":{"description":"Create a new tenant. Internal API keys only.","operationId":"TenantsCreate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantCreateRequest"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tenant"}}},"description":"Created"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"409":{"$ref":"#/components/responses/ConflictError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Create tenant","tags":["tenants"],"x-access-scope":"internal","x-badges":[{"name":"Internal"},{"name":"Idempotency-Key"}],"x-idempotency":true}},"/tenants/current":{"get":{"description":"Get information about the current tenant associated with the API key","operationId":"TenantsGet","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tenant"}}},"description":"OK"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Get current tenant","tags":["tenants"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]}},"/tenants/{tenant_id}":{"get":{"description":"Retrieve a tenant by its identifier. Internal API keys only.","operationId":"TenantsGetTenant","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tenant"}}},"description":"OK"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Get tenant","tags":["tenants"],"x-access-scope":"internal","x-badges":[{"name":"Internal"}]},"parameters":[{"description":"Unique tenant identifier","in":"path","name":"tenant_id","required":true,"schema":{"type":"string"}}],"patch":{"description":"Update attributes for a tenant. Internal API keys only.","operationId":"TenantsUpdate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantUpdateRequest"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tenant"}}},"description":"OK"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Update tenant","tags":["tenants"],"x-access-scope":"internal","x-badges":[{"name":"Internal"},{"name":"Idempotency-Key"}],"x-idempotency":true}},"/webhooks":{"get":{"description":"Get all webhooks for the authenticated tenant","operationId":"WebhooksList","parameters":[{"description":"Maximum number of webhooks to return (default: 50, maximum: 100)","in":"query","name":"limit","schema":{"default":50,"maximum":100,"minimum":1,"type":"integer"}},{"description":"Opaque cursor for pagination (treat as a token)","in":"query","name":"cursor","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"examples":{"sample":{"value":{"items":[{"active":true,"created_at":"2025-01-10T15:04:05Z","ephemeral":false,"id":"wh_01HQ5KXJ8Z8N9M2K5D6P7R3S4T","last_activity_at":"2025-01-10T16:00:00Z","secret":"whsec_bXktc2VjcmV0LWNleQ==","tenant_id":"tn_01HQ5KXJ8Z8N9M2K5D6P7R3S4T","url":"https://api.acme.dev/hooks/mail"}],"next":null,"prev":null}}},"schema":{"$ref":"#/components/schemas/PaginatedWebhooksResponse"}}},"description":"OK"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"List webhooks","tags":["webhooks"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]},"post":{"description":"Create a new webhook or update an existing one for the authenticated tenant.\n\nYou can update in two ways:\n- Provide an `id` of an existing webhook to update it. In this case, `url` is not required and fields you omit (including `secret`) are left unchanged.\n- Omit `id` and provide a `url`. If a webhook with the same URL already exists, it will be updated; otherwise, a new webhook is created.\n\nFor creation, if `secret` is omitted, a Standard Webhooks compatible secret is generated. For updates, `secret` is optional and only changed if provided.\n","operationId":"WebhooksCreate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookInput"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Webhook"}}},"description":"Updated existing webhook"},"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Webhook"}}},"description":"Created new webhook"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Create or update a webhook","tags":["webhooks"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"},{"name":"Idempotency-Key"}],"x-idempotency":true}},"/webhooks/deliveries":{"get":{"description":"Retrieve recorded webhook delivery attempts and responses for the authenticated tenant.","operationId":"WebhooksDeliveries","parameters":[{"description":"Maximum number of delivery attempts to return (default: 50, maximum: 200)","in":"query","name":"limit","schema":{"default":50,"maximum":200,"minimum":1,"type":"integer"}},{"description":"Opaque cursor for pagination (treat as a token)","in":"query","name":"cursor","schema":{"type":"string"}},{"description":"Filter attempts to a specific webhook","in":"query","name":"webhook_id","schema":{"type":"string"}},{"description":"Filter attempts to a specific scheduled delivery","in":"query","name":"delivery_id","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedWebhookDeliveryAttemptsResponse"}}},"description":"OK"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"List webhook delivery attempts","tags":["webhooks"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]}},"/webhooks/deliveries/{delivery_id}/redeliver":{"post":{"description":"Create a new scheduled delivery using the payload from an existing delivery attempt or scheduled delivery.\n\n**IMPORTANT:** If you specify a different target `webhook_id`, the delivery will bypass that webhook's configured filters (event types, mailboxes, domains). The webhook will receive the payload regardless of its filter configuration. Use this feature carefully when delivering to a different webhook.\n\nWhen delivering to the original webhook (or when `webhook_id` is omitted), the delivery will also bypass filters.\n","operationId":"WebhooksRedeliver","parameters":[{"description":"The delivery ID or attempt ID to re-deliver","in":"path","name":"delivery_id","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookRedeliverRequest"}}}},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookScheduledDelivery"}}},"description":"New delivery created and scheduled"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Re-deliver a webhook","tags":["webhooks"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"},{"name":"Idempotency-Key"}],"x-idempotency":true}},"/webhooks/queue":{"get":{"description":"Get the outstanding webhook deliveries that are scheduled or awaiting retry for the authenticated tenant.","operationId":"WebhooksQueue","parameters":[{"description":"Maximum number of queued deliveries to return (default: 50, maximum: 200)","in":"query","name":"limit","schema":{"default":50,"maximum":200,"minimum":1,"type":"integer"}},{"description":"Opaque cursor for pagination (treat as a token)","in":"query","name":"cursor","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedWebhookScheduledDeliveriesResponse"}}},"description":"OK"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"View queued webhook deliveries","tags":["webhooks"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]}},"/webhooks/{webhook_id}":{"delete":{"description":"Delete a webhook by its ID","operationId":"WebhooksDelete","parameters":[{"description":"Unique identifier of the webhook to delete","in":"path","name":"webhook_id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"properties":{"status":{"description":"Operation status confirmation","type":"string","examples":["deleted"]}},"required":["status"],"type":"object"}}},"description":"OK"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"404":{"$ref":"#/components/responses/NotFoundError"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"BearerAuth":[]}],"summary":"Delete a webhook","tags":["webhooks"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]},"get":{"description":"Get a specific webhook by its ID","operationId":"WebhooksGet","parameters":[{"description":"Unique identifier of the webhook to retrieve","in":"path","name":"webhook_id","required":true,"schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Webhook"}}},"description":"OK"},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"404":{"$ref":"#/components/responses/NotFoundError"}},"security":[{"BearerAuth":[]}],"summary":"Get webhook by ID","tags":["webhooks"],"x-access-scope":"tenant","x-badges":[{"name":"Tenant"}]}}},"servers":[{"description":"API v1","url":"/api/v1"}],"tags":[{"name":"tenants","x-displayName":"Tenants"},{"name":"domains","x-displayName":"Domains"},{"name":"mailboxes","x-displayName":"Mailboxes"},{"name":"threads","x-displayName":"Threads"},{"name":"emails","x-displayName":"Emails"},{"name":"attachments","x-displayName":"Attachments"},{"name":"api-keys","x-displayName":"API Keys"},{"name":"webhooks","x-displayName":"Webhooks"}]}